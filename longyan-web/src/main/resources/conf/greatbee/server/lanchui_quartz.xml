<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

    <!-- 要调用的工作类 -->
    <!--<bean id="currentConstructionTask" class="com.greatbee.lanchui.task.CurrentConstructionTask"></bean>-->
    <!-- 定义调用对象和调用对象的方法 -->
    <!--<bean id="jobtask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">-->
    <!--&lt;!&ndash; 调用的类 &ndash;&gt;-->
    <!--<property name="targetObject">-->
    <!--<ref bean="currentConstructionTask"/>-->
    <!--</property>-->
    <!--&lt;!&ndash; 调用类中的方法 &ndash;&gt;-->
    <!--<property name="targetMethod">-->
    <!--<value>Execute</value>-->
    <!--</property>-->
    <!--</bean>-->


    <!-- 定义触发时间 -->
    <!--<bean id="doConstruction" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">-->
    <!--<property name="jobDetail">-->
    <!--<ref bean="jobtask"/>-->
    <!--</property>-->
    <!--&lt;!&ndash; cron表达式 &ndash;&gt;-->
    <!--<property name="cronExpression" value="${task_construction_enable}"/>-->
    <!--</bean>-->

    <!-- 员工录入月报计算 start -->
    <bean id="employeeInputTaskBean" class="com.greatbee.lanchui.task.EmployeeInputTask"></bean>
    <bean id="employeeInputTask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject">
            <ref bean="employeeInputTaskBean"/>
        </property>
        <property name="targetMethod">
            <value>employeeMonthInput</value>
        </property>
    </bean>
    <bean id="doEmployeeInputTask" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail">
            <ref bean="employeeInputTask"/>
        </property>
        <property name="cronExpression" value="${employee_input_report}"/>
    </bean>
    <!-- 员工录入月报计算 end -->

    <!-- 商场录入情况计算 start -->
    <bean id="shoppingMonthInputTaskBean" class="com.greatbee.lanchui.task.ShoppingMonthInputTask"></bean>
    <bean id="shoppingMonthInputTask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject">
            <ref bean="organizationInputTaskBean"/>
        </property>
        <property name="targetMethod">
            <value>Execute</value>
        </property>
    </bean>
    <bean id="doShoppingMonthInputTask" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail">
            <ref bean="shoppingMonthInputTask"/>
        </property>
        <property name="cronExpression" value="${mall_input_report}"/>
    </bean>
    <!-- 商场录入情况计算 end -->

    <!-- 大区录入情况计算 start -->
    <bean id="organizationInputTaskBean" class="com.greatbee.lanchui.task.OrganizationInputTask"></bean>
    <bean id="organizationInputTask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject">
            <ref bean="organizationInputTaskBean"/>
        </property>
        <property name="targetMethod">
            <value>Execute</value>
        </property>
    </bean>
    <bean id="doOrganizationInputTask" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail">
            <ref bean="organizationInputTask"/>
        </property>
        <property name="cronExpression" value="${area_input_report}"/>
    </bean>
    <!-- 大区录入情况计算 end -->

    <!-- 计算商场附近的小区 start -->
<!--    <bean id="shoppingTaskBean" class="com.greatbee.lanchui.task.ShoppingTask"></bean>
    <bean id="shoppingTask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject">
            <ref bean="shoppingTaskBean"/>
        </property>
        <property name="targetMethod">
            <value>getCommunity</value>
        </property>
    </bean>-->
<!--    <bean id="doShoppingTask" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail">
           &lt;!&ndash; <ref bean="shoppingMonthInputTask"/>&ndash;&gt;
            <ref bean="shoppingTask"/>
        </property>
        <property name="cronExpression" value="0 0/1 * * * ?"/>
    </bean>-->
    <!-- 计算商场附近的小区 end -->

    <!-- 商场排名计算 start -->
    <bean id="mallRankJobTaskBean" class="com.greatbee.lanchui.task.MallRankTask"></bean>
    <bean id="mallRankJobTask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject">
            <ref bean="mallRankJobTaskBean"/>
        </property>
        <property name="targetMethod">
            <value>mallRank</value>
        </property>
    </bean>
    <bean id="doMallRank" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail">
            <ref bean="mallRankJobTask"/>
        </property>
        <property name="cronExpression" value="${task_mall_rank_timer}"/>
    </bean>
    <!-- 商场排名计算 end -->

    <!-- 员工排名计算 start -->
    <bean id="employeeRankTaskBean" class="com.greatbee.lanchui.task.EmployeeRankTask"></bean>
    <bean id="employeeRankJobTask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject">
            <ref bean="employeeRankTaskBean"/>
        </property>
        <property name="targetMethod">
            <value>employeeRank</value>
        </property>
    </bean>
    <bean id="doEmployeeRank" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail">
            <ref bean="employeeRankJobTask"/>
        </property>
        <property name="cronExpression" value="${task_employee_rank_timer}"/>
    </bean>
    <!-- 员工排名计算 end -->

    <!-- 商场组织机构数据统计 start -->
    <bean id="shoppingMallOrganizationJobTaskBean" class="com.greatbee.lanchui.task.ShoppingMallOrganizationTask"></bean>
    <bean id="mallOrganizationJobTask" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject">
            <ref bean="shoppingMallOrganizationJobTaskBean"/>
        </property>
        <property name="targetMethod">
            <value>shoppingMallOrganization</value>
        </property>
    </bean>
    <bean id="doShoppingMallOrganization" class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
        <property name="jobDetail">
            <ref bean="mallRankJobTask"/>
        </property>
        <property name="cronExpression" value="${task_shopping_mall_organization_timer}"/>
    </bean>
    <!-- 商场排名计算 end -->

    <!-- 总管理类 如果将lazy-init='false'那么容器启动就会执行调度程序  -->
    <bean id="startQuertz" lazy-init="false" autowire="no"
          class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="triggers">
            <list>
                <!--<ref bean="doConstruction"/>             -->
                <ref bean="doEmployeeRank"/>
                <ref bean="doMallRank"/>
                <ref bean="doShoppingMallOrganization"/>
            </list>
        </property>
    </bean>

</beans>